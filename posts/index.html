<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Posts | Carlos的废话集</title>
<meta name="keywords" content="">
<meta name="description" content="Posts - Carlos的废话集">
<meta name="author" content="">
<link rel="canonical" href="https://carlos19960601.github.io/posts/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css" integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://carlos19960601.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://carlos19960601.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://carlos19960601.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://carlos19960601.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://carlos19960601.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="https://carlos19960601.github.io/posts/index.xml">
<link rel="alternate" hreflang="zh" href="https://carlos19960601.github.io/posts/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Posts" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://carlos19960601.github.io/posts/" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Posts"/>
<meta name="twitter:description" content=""/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://carlos19960601.github.io/posts/"
    }
  ]
}
</script>
</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://carlos19960601.github.io/" accesskey="h" title="Carlos的废话集 (Alt + H)">Carlos的废话集</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://carlos19960601.github.io/archives" title="归档">
                    <span>归档</span>
                </a>
            </li>
            <li>
                <a href="https://carlos19960601.github.io/tags" title="标签">
                    <span>标签</span>
                </a>
            </li>
            <li>
                <a href="https://carlos19960601.github.io/search" title="搜索">
                    <span>搜索</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header">
  <h1>
    Posts
  </h1>
</header>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">浏览器跨域
    </h2>
  </header>
  <div class="entry-content">
    <p>背景 最近在写项目的时候，发现如果后端没有处理CORS的问题，前端使用Axios请求数据的时候，会直接报Axios Network Error。影响了开发。
解决 一般情况下后端服务都会有CORS middleware。能够直接解决CORS的问题。但是如果每个服务都这样，我觉得麻烦。所以尝试使用Nginx来同样处理。
跨域相关的响应头
Access-Control-Allow-Origin: Used to set the source address that allows cross-domain requests (preflight requests and formal requests will be verified when cross-domain) Access-Control-Allow-Headers: Special header information fields allowed to be carried across domains (only verified in preflight requests) Access-Control-Allow-Methods: Cross-domain allowed request methods or HTTP verbs (only in preflight request verification) Access-Control-Allow-Credentials: Whether to allow the use of cookies across domains. If you want to use cookies across domains, you can add this request response header and set the value to true (setting it or not setting it will not affect the sending of the request, but will only affect whether cookies should be carried across domains. , but if set, both preflight requests and formal requests need to be set). However, it is not recommended to use it cross-domain (it has been used in the project, but it is unstable and cannot be carried by some browsers) unless necessary, because there are many alternatives. 如果出现跨域，直接在前端请求会报错
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-10-11 09:58:02 +0800 +0800'>2024-10-11</span>&nbsp;·&nbsp;2 分钟</footer>
  <a class="entry-link" aria-label="post link to 浏览器跨域" href="https://carlos19960601.github.io/posts/%E6%B5%8F%E8%A7%88%E5%99%A8%E8%B7%A8%E5%9F%9F/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Git学习
    </h2>
  </header>
  <div class="entry-content">
    <p>commit 消息提交规范 feat: 新功能（feature）
用于提交新功能。 例如：feat: 增加用户注册功能 fix: 修复 bug
用于提交 bug 修复。 例如：fix: 修复登录页面崩溃的问题 docs: 文档变更
用于提交仅文档相关的修改。 例如：docs: 更新README文件 style: 代码风格变动（不影响代码逻辑）
用于提交仅格式化、标点符号、空白等不影响代码运行的变更。 例如：style: 删除多余的空行 refactor: 代码重构（既不是新增功能也不是修复bug的代码更改）
用于提交代码重构。 例如：refactor: 重构用户验证逻辑 perf: 性能优化
用于提交提升性能的代码修改。 例如：perf: 优化图片加载速度 test: 添加或修改测试
用于提交测试相关的内容。 例如：test: 增加用户模块的单元测试 chore: 杂项（构建过程或辅助工具的变动）
用于提交构建过程、辅助工具等相关的内容修改。 例如：chore: 更新依赖库 build: 构建系统或外部依赖项的变更
用于提交影响构建系统的更改。 例如：build: 升级webpack到版本5 ci: 持续集成配置的变更
用于提交CI配置文件和脚本的修改。 例如：ci: 修改GitHub Actions配置文件 revert: 回滚
用于提交回滚之前的提交。 例如：revert: 回滚feat: 增加用户注册功能 </p>
  </div>
  <footer class="entry-footer"><span title='2024-09-23 15:23:57 +0800 +0800'>2024-09-23</span>&nbsp;·&nbsp;1 分钟</footer>
  <a class="entry-link" aria-label="post link to Git学习" href="https://carlos19960601.github.io/posts/git%E5%AD%A6%E4%B9%A0/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Nextjs学习
    </h2>
  </header>
  <div class="entry-content">
    <p>官方教程 Learn Next.js 服务端组件示例 创建一个名为 app/api/posts/route.ts 的文件，用于定义路由处理程序：
import { db } from &#39;../../lib/db&#39;; export async function GET(request: Request) { const posts = await db.post.findMany(); return new Response(JSON.stringify(posts), { status: 200 }); } 在页面组件中使用 fetch 和 getServerSideProps 获取数据并展示：
// pages/posts/index.tsx import { useEffect, useState } from &#39;react&#39;; export async function getServerSideProps() { const response = await fetch(&#39;/api/posts&#39;); const data = await response.json(); return { props: { posts: data, }, }; } export default function PostsPage({ posts }: { posts: any[] }) { return ( &lt;div&gt; {posts.map((post) =&gt; ( &lt;div key={post.id}&gt; &lt;h2&gt;{post.title}&lt;/h2&gt; &lt;p&gt;{post.content}&lt;/p&gt; &lt;/div&gt; ))} &lt;/div&gt; ); } Should I use SWR or Server Actions? No exact answer - but here is what I do:
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-09-12 09:27:24 +0800 +0800'>2024-09-12</span>&nbsp;·&nbsp;1 分钟</footer>
  <a class="entry-link" aria-label="post link to Nextjs学习" href="https://carlos19960601.github.io/posts/nextjs%E5%AD%A6%E4%B9%A0/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">React笔记
    </h2>
  </header>
  <div class="entry-content">
    <p>Twitter/X 博主@_georgemoller的分享 主要记录Twitter博主@_georgemoller分享的React技巧。对于我这种React小白很使用。于是搬运过来，并附上个人的一些理解。如有问题请邮箱本人，欢迎各位指正。
Solve re-render issues with composition 个人理解：功能单一，利用组合模式减少耦合，带来不必要的重新渲染
Utility Types For Enhanced Reusablity 个人理解：Typescript Pick的使用
Bad use case for useCallback useCallback 使用在复杂逻辑的组件，简单组件不会消耗造成性能问题时不必使用
Intersection types to extends native props in a component Don’t listen for ref changes with useEffect 本人曾经这么干过
useEffect vs useLayoutEffect 个人理解：useLayoutEffect在DOM更新后，浏览器绘制前执行。useEffect在DOM更新后，浏览器绘制后执行。
Separation of Concerns in React React中的关注点分离 这是一个重要的软件设计原则，在React开发中也同样适用。它指的是将代码按照不同的功能或责任进行划分和组织，使每个部分专注于特定的任务。在React中，这通常体现为:
将UI和逻辑分离 将状态管理与渲染逻辑分离 将可复用的逻辑抽离成自定义Hook 将大型组件拆分成更小的、功能单一的组件 遵循这一原则可以提高代码的可维护性、可读性和可重用性。
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-08-28 14:43:33 +0800 +0800'>2024-08-28</span>&nbsp;·&nbsp;1 分钟</footer>
  <a class="entry-link" aria-label="post link to React笔记" href="https://carlos19960601.github.io/posts/react%E7%AC%94%E8%AE%B0/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">开源项目学习推荐
    </h2>
  </header>
  <div class="entry-content">
    <p>桌面客户端 tauri tauri 后端使用rust。
clash-verge-rev: 基于Mihomo内核的翻墙客户端GUI rust system-proxy的实现 Electron Electron 后端使用node。
everyone-can-use-english: 英语学习软件 项目结构清晰，可以参考学习 mihomo-party: Mihomo GUI 个人观点：tauri是webview&#43;rust的实现，性能和打包的体积比较小，但是rust门槛高，tauri的生态可能比不上node。Electron是Chrome内核和NodeJS，入门门槛低，而且node的生态比较好。再不在乎包体积和性能的情况下，还是推荐Electron。
移动客户端 Flutter pilipala: 第三方bilibili客户端 使用Get做状态管理 使用Hive做本地存储 封装了dio网络请求 基于media-kit实现视频播放 Cashew: An app created to help users manage a budget and purchases flutter_cloud_music: 还原网易云，flutter SDK版本较低，依赖包有些缺乏维护 Taskez: A Productivity Mobile Application UI kit built with Flutter Web前端 React eidos: 类似notion的软件 使用zustand做状态管理 能够了解到PWA、serivce-woker、web-worker等 jsoncrack.com: json可视化展示 c-shopping: 基于Next.js的全栈购物网站 使用 mongoose 操作数据库 学习 nextjs 的 Route Handlers 的使用 noodle: Rethinking Student Productivity 学习在nextjs中使用trpc 后端 Golang mihomo: 翻墙软件，ClashMeta 能够学习到各种翻墙协议的内容 asynq: 基于Redis实现的分布式任务 redis lua脚本的使用 golang 多个sever的启动与停止的实现 galene: The Galène videoconference server 了解WebRTC相关的指示 badger: KV存储引擎 能够学习到LSM树的实现 Rust xh: 类似于curl的命令行请求工具 数据分析与机器学习 handson-ml3: Hands-on Machine Learning with Scikit-Learn, Keras and TensorFlow (3rd edition) 100-Days-Of-ML-Code </p>
  </div>
  <footer class="entry-footer"><span title='2024-08-20 10:04:54 +0800 +0800'>2024-08-20</span>&nbsp;·&nbsp;1 分钟</footer>
  <a class="entry-link" aria-label="post link to 开源项目学习推荐" href="https://carlos19960601.github.io/posts/%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE%E5%AD%A6%E4%B9%A0%E6%8E%A8%E8%8D%90/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">学习rust
    </h2>
  </header>
  <div class="entry-content">
    <p>生命周期 rust自动推断变量的生命周期
fn longest(x: &amp;str, y: &amp;str) -&gt; &amp;str { if x.len() &gt; y.len() { x } else { y } } 但是上面这段代码，rust无法推断出变量的生命周期。所以需要显示的标注生命周期。
生命周期标注并不会改变任何引用的实际作用域
参考资料 通过例子学 Rust Rust 程序设计语言 Rust语言圣经( </p>
  </div>
  <footer class="entry-footer"><span title='2024-07-25 10:56:02 +0800 +0800'>2024-07-25</span>&nbsp;·&nbsp;1 分钟</footer>
  <a class="entry-link" aria-label="post link to 学习rust" href="https://carlos19960601.github.io/posts/%E5%AD%A6%E4%B9%A0rust/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">pipx使用
    </h2>
  </header>
  <div class="entry-content">
    <p>pipx是什么？ 可以参加pipx的介绍。
作为一个python小白，看了几遍，搜索了多篇博客了解pipx是什么，仍然不懂是个啥。
我在这仅说明一下我自己的理解。pipx相当于一个安装工具。python有自己的安装包的工具pip。那么pip和pipx有什么区别呢？
如果直接pip安装包会安装在python目录下的site-packages下。由于这是个全局目录。如果在不同的项目里面，可能使用的各个包版本不同，可能会产生冲突。所以我们偏向使用一个干净的site-package。其实python提供了解决方案–虚拟环境。pipx只是基于这个概念，让使用者更好的使用。
注意 pipx 安装的是一些可执行的python应用。比如 poetry, jupyter等
简单使用 安装pipx
brew install pipx pipx ensurepath 安装jupyter
可以使用--python参数指定虚拟环境python版本。如果不指定，使用的是你电脑上安装的最新的python`版本。
pipx install notebook --python=python3.11 --force 执行后, jupyter就会被安装在 ~/.local/pipx/venvs/notebook/bin。可以看到在pipx的venvs目录下面。也就说pipx安装的每个应用都会有自己的虚拟环境。
在写jupyter notebook的时候，我们可能需要numpy，panda等这些python库。所以我们需要将这些安装到notebook的虚拟环境中，才能使用
pipx inject notebook pandas numpy 问题记录 如果pipx inject的时候需要使用proxy。由于底层还是使用pip，所以需要通过PIP_*的环境变量传递proxy信息 export PIP_PROXY=http://127.0.0.1:7890 https_proxy=http://127.0.0.1:7890 </p>
  </div>
  <footer class="entry-footer"><span title='2024-07-24 16:43:50 +0800 +0800'>2024-07-24</span>&nbsp;·&nbsp;1 分钟</footer>
  <a class="entry-link" aria-label="post link to pipx使用" href="https://carlos19960601.github.io/posts/pipx%E4%BD%BF%E7%94%A8/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">正则表达式
    </h2>
  </header>
  <div class="entry-content">
    <p>元字符 正则表达式主要依赖于元字符。
元字符不代表他们本身的字面意思，他们都有特殊的含义。一些元字符写在方括号中的时候有一些特殊的意思。以下是一些元字符的介绍：
元字符 描述 . 句号匹配任意单个字符除了换行符。 [ ] 字符种类。匹配方括号内的任意字符。 [^ ] 否定的字符种类。匹配除了方括号里的任意字符 * 匹配&gt;=0个重复的在*号之前的字符。 &#43; 匹配&gt;=1个重复的&#43;号前的字符。 ? 标记?之前的字符为可选. {n,m} 匹配num个大括号之前的字符或字符集 (n &lt;= num &lt;= m). (xyz) 字符集，匹配与 xyz 完全相等的字符串. | 或运算符，匹配符号前或后的字符. \ 转义字符,用于匹配一些保留的字符 [ ] ( ) { } . * &#43; ? ^ $ \ | ^ 从开始行开始匹配. $ 从末端开始匹配. 简写字符集 正则表达式提供一些常用的字符集简写。如下:
简写 描述 . 除换行符外的所有字符 \w 匹配所有字母数字，等同于 [a-zA-Z0-9_] \W 匹配所有非字母数字，即符号，等同于： [^\w] \d 匹配数字： [0-9] \D 匹配非数字： [^\d] \s 匹配所有空格字符，等同于： [\t\n\f\r\p{Z}] \S 匹配所有非空格字符： [^\s] \f 匹配一个换页符 \n 匹配一个换行符 \r 匹配一个回车符 \t 匹配一个制表符 \v 匹配一个垂直制表符 \p 匹配 CR/LF（等同于 \r\n），用来匹配 DOS 行终止符 零宽度断言（前后预查） 先行断言和后发断言（合称 lookaround）都属于非捕获组（用于匹配模式，但不包括在匹配列表中）。当我们需要一个模式的前面或后面有另一个特定的模式时，就可以使用它们。
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-07-18 14:47:42 +0800 +0800'>2024-07-18</span>&nbsp;·&nbsp;1 分钟</footer>
  <a class="entry-link" aria-label="post link to 正则表达式" href="https://carlos19960601.github.io/posts/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Docker使用问题记录
    </h2>
  </header>
  <div class="entry-content">
    <p>安装Docker 参考Install using the apt repository
# Add Docker&#39;s official GPG key: sudo apt-get update sudo apt-get install ca-certificates curl sudo install -m 0755 -d /etc/apt/keyrings sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc sudo chmod a&#43;r /etc/apt/keyrings/docker.asc # Add the repository to Apt sources: echo \ &#34;deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \ $(. /etc/os-release &amp;&amp; echo &#34;$VERSION_CODENAME&#34;) stable&#34; | \ sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null sudo apt-get update 其中在这步中，即使设置了Proxy
export https_proxy=http://127.0.0.1:7890 http_proxy=http://127.0.0.1:7890 all_proxy=socks5://127.0.0.1:7890 好像并没有生效，我当时是直接下载gpg文件，然后手动copy到/etc/apt/keyrings/docker.asc
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-07-13 07:02:21 +0800 +0800'>2024-07-13</span>&nbsp;·&nbsp;1 分钟</footer>
  <a class="entry-link" aria-label="post link to Docker使用问题记录" href="https://carlos19960601.github.io/posts/docker%E4%BD%BF%E7%94%A8%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">线性代数
    </h2>
  </header>
  <div class="entry-content">
    <p>最近在看 3Blue1Brown的Essence of linear algebra。预习一下大学知识。
线性变换 线性变换矩阵可以看作是变换之后坐标系的 i, j 单位向量
矩阵乘法 矩阵乘法可以是看作是从右到左进行多次变化。
同样的3维就是对3维空间进行变换。
行列式 行列式表示将面积缩放的大小
点积 在大学课堂上，老师说点积是向量长度和另外一个向量上在该向量方向上投影的积。但是一直不明白为什么。
其实可以把其中一个向量看成一种变换。从二维到一维的转换。
参考资料 Essence of linear algebra </p>
  </div>
  <footer class="entry-footer"><span title='2024-07-08 22:53:36 +0800 +0800'>2024-07-08</span>&nbsp;·&nbsp;1 分钟</footer>
  <a class="entry-link" aria-label="post link to 线性代数" href="https://carlos19960601.github.io/posts/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="next" href="https://carlos19960601.github.io/posts/page/2/">下一页&nbsp;2/3&nbsp;»
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
        <span>&copy; 2024 <a href="https://carlos19960601.github.io/">Carlos的废话集</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
